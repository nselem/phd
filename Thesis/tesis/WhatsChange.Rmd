---
title: "WChange"
author: "NellySelem"
date: "December 29, 2016"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

## Whats change genomic dynamics



```{r cars}
library(ggplot2)
library( reshape )
library(plyr )
library(RColorBrewer)
families <- read.table("100Archea/100Archaea.r.allwc", header=TRUE, sep="\t")
hm.palette <- colorRampPalette(rev(brewer.pal(11, 'Spectral')), space='Lab')  
Frecuencia=sort(table(families$FunctionID),decreasing = TRUE)
head(Frecuencia)
Frecuencia[1]
indx <- which((Frecuencia[]) > 110) ;
#Name=families[which(families$FunctionID==indx),]
#table(Name$Function)
indx
```
##Data Bases
###Central pathways  
Central database were chosen by BBH from 
-Actino  
Corynebacterium glutamicum     
242137	6666666.112876	Streptomyces coelicolor A3(2) NC_003888.3	1	8667507	2015-03-27    
288055	6666666.146923	Mycobacterium tuberculosis H37Rv NC_000962.3	1	4411532  
  
-Archaea 
closed  
390224	6666666.211599	Methanosarcina acetivorans C2A C2A AE010299.1	1	5751492	SELECTED	Euryarchaeota	Methanomicrobia  
390346	6666666.211718	Nanoarchaeum equitans Kin4-M - AE017199.1	1	490885	SELECTED	DPANN group	Nanoarchaeota  
390660	6666666.211909	Natronomonas pharaonis DSM 2160 Gabara CR936257.1	1	2595221	SELECTED	Euryarchaeota	Halobacteria    
390189	6666666.211567	Sulfolobus solfataricus P2 P2 AE006641.1	1	2992245	SELECTED	TACK group	Crenarchaeota    
-Cyanos  
391213	6666666.212444	Cyanothece sp. ATCC 51142 CP000806.1	1	4934271	Cyanobacteria; Oscillatoriophycideae; Oscillatoriales  

391246	6666666.212477	Synechococcus sp. PCC 7002 CP000951.1	1	3008047	Cyanobacteria; Synechococcales; Synechococcaceae  

351204	6666666.189647	Arthrospira platensis C1 	1	6089210

### Genome Dynamics  
Among BBH central databases, genomic dynamics was included.  
Whats change site:[WC Data](http://pubseed.theseed.org/wc.cgi?request=show_otus&base=/homes/nselem/Data/CS)  

groups were formed with 100Cyanos, 100Archaea , 118 Actinos Closed, 43StreptosClosed    
Selected organims were  
```{r WC_organisms, results = "asis"}
table <- read.csv("WC_Organisms.txt", row.names = 1,sep="\t")
kable(table,  caption = "WC_Organisms \\label{tab:WC_Organisms}",caption.short = "WC_Organisms ")
```



Those families present on at least as much as genomes on the group    
Cyanos  100 647  
Abundant.Families.100Cyanos  
Actinos  118  132  
Abundant.Families.43Strepto  
Archaea  100  35  
Abundant.Families.Actinos  
Streptomyces  43  1263  
Abundant.Families.Archaeas  

Those families expanded on at least two groups  
`cat *Abun* | cut -f3| sort | uniq -c | sort >Abundance.all`  
<!--cut -f3 Abundant.Families.100Cyanos |sort >f3Cyanos-->
<!--Excel sorted-->
  
Those Families expanded on Archaea  and not expanded on Actino  
`comm -23 f3Archaeas f3Actinos >ArchaeasNoActinos`  
Those Families expanded on Actino and not on Archaea   
`comm -13 f3Archaeas f3Actinos >ActinosNoArchaea`  
  
Those families expanded on Streptomyces but not in ActinoBacteria   
`comm -13 f343Strepto f3Actinos >ActinosNoStrepto`  
Those Families expanded on Actinobacteria and not in Streptomyces   
` comm -23 f343Strepto f3Actinos >StreptoNoActinos `  

Those Families expanded on Cyano and not in Actino  
`comm -23 f3Cyanos f3Actinos >CyanosNoActinos`  
  


## Including Plots

You can also embed plots, for example:

```{r pressure, echo=FALSE}

```

Note that the `echo = FALSE` parameter was added to the code chunk to prevent printing of the R code that generated the plot.
##Argonne  
ssh nselem@login.mcs.anl.gov  
phrase  
ssh nselem@maple  
password  

cs close strain  
wc whats chain  
  
we source (edit bashrc)  
link ln (create a link to ross directory)  
run out of power:  
screen  
  
in Seqs (not mine)  
cat   
6666666.103569  6666666.112815  6666666.112823  6666666.112833  6666666.112841  6666666.112849  6666666.112857  > /home/nse/Concat_Full  
to find paralogous sets  
 svr_representative_sequences -b -f Id_Clust -s 0.5 < Concat_Full > TempFull&   
 perl -p -i -e 's/\r//' readable.tree to clean the tree  
To find contexts o pegs of paralogous sets  
  
Context midle point 5000 bp (using text tables)  
scp 6666666.112839.txt nselem@maple:/homes/nselem/Strepto_01/.  
  
fig|6666666.112839.peg.26  
  
copy families.all file  
on the file we have column1 family name column 5 peg id  
  
cluster_objects < elements_to_cluster > ClusteFile  
  
write a file with pegs  
1	peg1	adjacent1,	adjacent2 ....  
1	peg2  
2  
2  
   
write a file similiar but with the family number  
  
1	peg1	fn1,	fn2 ....  
1	peg2  
2  
2  
  
compare each peg on this file from the same family  
  
Write the conextions file  
peg1	peg2  
peg1 	peg3  
peg2	peg3  
  
cluster this file and score the cluster  
  
Define  
  
	1.  a "function set" is generated by the what's changed directory  
 as a "family"  
  
	2.  a "paralog set" is a set of function sets in which paralogous  
 members span the sets  
  
	3.  a PEG is in a paralog set if it is in one ofthe function sets  
 that make up the  
  
	4.  a "context" of a PEG is the set of close pegs  
	4.1 First cluster operation would give us: context sets  (CS)  
  
	5.  a "context set" is a set of PEGs with "similar contexts"  
	5.1 second clustering operation would give us:cluster  (Cl)  
  
	6.  a "cluster" is a set of context sets (each context set is a different   
	
  
compute:  
	Compute the context sets that are made from PEGs that occur in PS.  
	Compute the contexts of PEGs in PS.   
  
cluster these context using the "similar contexts" relation  
  
This gives a set of clusters, and the members of the clusters are context sets  
That is, a cluster is a set of context sets  
  
        
      a. the number of contexts sets i  
  
score the clusters  
	Take a paralog set PS.   
	Be the context sets: CS_1, CS_2,..., CS_k members of the paralogous set   
	k the number of contexts sets on the paralogous set  
	n_i the cardinality of CS_i  
  
	PS={CS1,CS2,...,CS3}  
	Cl={[CS_1,n_1],[CS_2,n_2],...,[CS_k,n_k]}  

	let be M=max(n_i)   i=1,2,..k (Maximum cardinality of Context sets)  
       	m=max(n_i)   i=1,2,..k, i!=M (second greatest cardinality of context sets)  
       	(We are intersted that a second copy is distributed)  

	We are interested on k,M,n to form a scoring function for the cluster set  
	S=f(k,m,M)=c_1*k+c_2*m+c_3*M  
  
  
############## history
Para hacer un nuevo set de datos	  

 591  cd Data/CS  
  592  mkdir Directorio  
  593  vi Directorio/rep.genomes  
  594  cd Directorio/  
  600  nohup svr_CS -d Directorio&  

Contenido de rep.genomes  
rast|390693     nselem35        q8Vf6ib  
rast|390675     nselem35        q8Vf6ib  
rast|388811     nselem35        q8Vf6ib  
  